{"version":3,"sources":["lazyload.min.js"],"names":["window","factory","lazySizes","document","module","exports","getElementsByClassName","lazysizes","lazySizesConfig","docElem","documentElement","Date","supportPicture","HTMLPictureElement","addEventListener","setTimeout","requestAnimationFrame","requestIdleCallback","regPicture","loadEvents","regClassCache","forEach","Array","prototype","hasClass","ele","cls","RegExp","test","addClass","setAttribute","trim","removeClass","reg","replace","addRemoveLoadEvents","dom","fn","add","action","evt","triggerEvent","elem","name","detail","noBubbles","noCancelable","event","createEvent","instance","initCustomEvent","dispatchEvent","updatePolyfill","el","full","polyfill","picturefill","pf","reevaluate","elements","src","getCSS","style","getComputedStyle","getWidth","parent","width","offsetWidth","minSize","_lazysizesWidth","parentNode","rAF","running","waiting","firstFns","secondFns","fns","run","runFns","length","shift","rafBatch","queue","apply","this","arguments","push","hidden","_lsFlush","rAFIt","simple","that","args","throttle","lastTime","rICTimeout","now","idleCallback","timeout","isPriority","delay","debounce","func","timestamp","later","last","loader","preloadElems","isCompleted","resetPreloadingTimer","loadMode","started","eLvW","elvH","eLtop","eLleft","eLright","eLbottom","defaultExpand","preloadExpand","hFac","regImg","regIframe","supportScroll","navigator","userAgent","currentExpand","isLoading","lowRuns","resetPreloading","e","target","isNestedVisible","elemExpand","outerRect","visible","body","offsetParent","getBoundingClientRect","left","right","top","bottom","checkElements","eLlen","i","rect","autoLoadElem","loadedSomething","elemNegativeExpand","elemExpandVal","beforeExpandVal","lazyloadElems","expand","clientHeight","clientWidth","expFactor","_lazyRace","innerWidth","innerHeight","loadHidden","unveilElement","preloadAfterLoad","sizesAttr","throttledCheckElements","switchLoadingClass","loadedClass","loadingClass","rafSwitchLoadingClass","rafedSwitchLoadingClass","changeIframeSrc","contentWindow","location","handleSources","source","customMedia","sourceSrcset","srcsetAttr","lazyUnveil","isAuto","sizes","isImg","srcset","isPicture","firesLoad","defaultPrevented","autosizesClass","srcAttr","nodeName","clearTimeout","call","getElementsByTagName","lazyClass","complete","naturalWidth","errorClass","autoSizer","updateElem","onload","afterScroll","_","preloadClass","MutationObserver","observe","childList","subtree","attributes","setInterval","readyState","checkElems","unveil","autosizesElems","sizeElement","sources","len","dataAttr","getSizeElement","debouncedUpdateElementsSizes","init","prop","lazySizesDefaults","lazysizesConfig","cfg","uP","aC","rC","hC","fire","gW"],"mappings":"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","file":"lazyload.min.js","sourcesContent":["(function (window, factory) {\n  var lazySizes = factory(window, window.document)\n  window.lazySizes = lazySizes\n  if (typeof module == 'object' && module.exports) {\n    module.exports = lazySizes\n  }\n}(window, function l (window, document) {\n    'use strict'\n    /*jshint eqnull:true */\n    if (!document.getElementsByClassName) {return}\n\n    var lazysizes, lazySizesConfig\n\n    var docElem = document.documentElement\n\n    var Date = window.Date\n\n    var supportPicture = window.HTMLPictureElement\n\n    var _addEventListener = 'addEventListener'\n\n    var _getAttribute = 'getAttribute'\n\n    var addEventListener = window[_addEventListener]\n\n    var setTimeout = window.setTimeout\n\n    var requestAnimationFrame = window.requestAnimationFrame || setTimeout\n\n    var requestIdleCallback = window.requestIdleCallback\n\n    var regPicture = /^picture$/i\n\n    var loadEvents = ['load', 'error', 'lazyincluded', '_lazyloaded']\n\n    var regClassCache = {}\n\n    var forEach = Array.prototype.forEach\n\n    var hasClass = function (ele, cls) {\n      if (!regClassCache[cls]) {\n        regClassCache[cls] = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)')\n      }\n      return regClassCache[cls].test(ele[_getAttribute]('class') || '') && regClassCache[cls]\n    }\n\n    var addClass = function (ele, cls) {\n      if (!hasClass(ele, cls)) {\n        ele.setAttribute('class', (ele[_getAttribute]('class') || '').trim() + ' ' + cls)\n      }\n    }\n\n    var removeClass = function (ele, cls) {\n      var reg\n      if ((reg = hasClass(ele, cls))) {\n        ele.setAttribute('class', (ele[_getAttribute]('class') || '').replace(reg, ' '))\n      }\n    }\n\n    var addRemoveLoadEvents = function (dom, fn, add) {\n      var action = add\n        ? _addEventListener\n        : 'removeEventListener'\n      if (add) {\n        addRemoveLoadEvents(dom, fn)\n      }\n      loadEvents.forEach(function (evt) {\n        dom[action](evt, fn)\n      })\n    }\n\n    var triggerEvent = function (elem, name, detail, noBubbles, noCancelable) {\n      var event = document.createEvent('CustomEvent')\n\n      if (!detail) {\n        detail = {}\n      }\n\n      detail.instance = lazysizes\n\n      event.initCustomEvent(name, !noBubbles, !noCancelable, detail)\n\n      elem.dispatchEvent(event)\n      return event\n    }\n\n    var updatePolyfill = function (el, full) {\n      var polyfill\n      if (!supportPicture && ( polyfill = (window.picturefill || lazySizesConfig.pf) )) {\n        polyfill({reevaluate: true, elements: [el]})\n      } else if (full && full.src) {\n        el.src = full.src\n      }\n    }\n\n    var getCSS = function (elem, style) {\n      return (getComputedStyle(elem, null) || {})[style]\n    }\n\n    var getWidth = function (elem, parent, width) {\n      width = width || elem.offsetWidth\n\n      while (width < lazySizesConfig.minSize && parent && !elem._lazysizesWidth) {\n        width = parent.offsetWidth\n        parent = parent.parentNode\n      }\n\n      return width\n    }\n\n    var rAF = (function () {\n      var running, waiting\n      var firstFns = []\n      var secondFns = []\n      var fns = firstFns\n\n      var run = function () {\n        var runFns = fns\n\n        fns = firstFns.length\n          ? secondFns\n          : firstFns\n\n        running = true\n        waiting = false\n\n        while (runFns.length) {\n          runFns.shift()()\n        }\n\n        running = false\n      }\n\n      var rafBatch = function (fn, queue) {\n        if (running && !queue) {\n          fn.apply(this, arguments)\n        } else {\n          fns.push(fn)\n\n          if (!waiting) {\n            waiting = true;\n            (document.hidden\n              ? setTimeout\n              : requestAnimationFrame)(run)\n          }\n        }\n      }\n\n      rafBatch._lsFlush = run\n\n      return rafBatch\n    })()\n\n    var rAFIt = function (fn, simple) {\n      return simple\n        ? function () {\n          rAF(fn)\n        }\n        : function () {\n          var that = this\n          var args = arguments\n          rAF(function () {\n            fn.apply(that, args)\n          })\n        }\n\n    }\n\n    var throttle = function (fn) {\n      var running\n      var lastTime = 0\n      var gDelay = 125\n      var RIC_DEFAULT_TIMEOUT = 666\n      var rICTimeout = RIC_DEFAULT_TIMEOUT\n      var run = function () {\n        running = false\n        lastTime = Date.now()\n        fn()\n      }\n      var idleCallback = requestIdleCallback\n        ? function () {\n          requestIdleCallback(run, {timeout: rICTimeout})\n          if (rICTimeout !== RIC_DEFAULT_TIMEOUT) {\n            rICTimeout = RIC_DEFAULT_TIMEOUT\n          }\n        }\n        : rAFIt(function () {\n          setTimeout(run)\n        }, true)\n\n\n      return function (isPriority) {\n        var delay\n        if ((isPriority = isPriority === true)) {\n          rICTimeout = 44\n        }\n\n        if (running) {\n          return\n        }\n\n        running = true\n\n        delay = gDelay - (Date.now() - lastTime)\n\n        if (delay < 0) {\n          delay = 0\n        }\n\n        if (isPriority || (delay < 9 && requestIdleCallback)) {\n          idleCallback()\n        } else {\n          setTimeout(idleCallback, delay)\n        }\n      }\n    }\n\n    //based on http://modernjavascript.blogspot.de/2013/08/building-better-debounce.html\n    var debounce = function (func) {\n      var timeout, timestamp\n      var wait = 99\n      var run = function () {\n        timeout = null\n        func()\n      }\n      var later = function () {\n        var last = Date.now() - timestamp\n\n        if (last < wait) {\n          setTimeout(later, wait - last)\n        } else {\n          (requestIdleCallback || run)(run)\n        }\n      }\n\n      return function () {\n        timestamp = Date.now()\n\n        if (!timeout) {\n          timeout = setTimeout(later, wait)\n        }\n      }\n    }\n\n    var loader = (function () {\n      var preloadElems, isCompleted, resetPreloadingTimer, loadMode, started\n\n      var eLvW, elvH, eLtop, eLleft, eLright, eLbottom\n\n      var defaultExpand, preloadExpand, hFac\n\n      var regImg = /^img$/i\n      var regIframe = /^iframe$/i\n\n      var supportScroll = ('onscroll' in window) && !(/glebot/.test(navigator.userAgent))\n\n      var shrinkExpand = 0\n      var currentExpand = 0\n\n      var isLoading = 0\n      var lowRuns = -1\n\n      var resetPreloading = function (e) {\n        isLoading--\n        if (e && e.target) {\n          addRemoveLoadEvents(e.target, resetPreloading)\n        }\n\n        if (!e || isLoading < 0 || !e.target) {\n          isLoading = 0\n        }\n      }\n\n      var isNestedVisible = function (elem, elemExpand) {\n        var outerRect\n        var parent = elem\n        var visible = getCSS(document.body, 'visibility') == 'hidden' || getCSS(elem, 'visibility') != 'hidden'\n\n        eLtop -= elemExpand\n        eLbottom += elemExpand\n        eLleft -= elemExpand\n        eLright += elemExpand\n\n        while (visible && (parent = parent.offsetParent) && parent != document.body && parent != docElem) {\n          visible = ((getCSS(parent, 'opacity') || 1) > 0)\n\n          if (visible && getCSS(parent, 'overflow') != 'visible') {\n            outerRect = parent.getBoundingClientRect()\n            visible = eLright > outerRect.left &&\n                      eLleft < outerRect.right &&\n                      eLbottom > outerRect.top - 1 &&\n                      eLtop < outerRect.bottom + 1\n\n          }\n        }\n\n        return visible\n      }\n\n      var checkElements = function () {\n        var eLlen, i, rect, autoLoadElem, loadedSomething, elemExpand, elemNegativeExpand, elemExpandVal, beforeExpandVal\n\n        var lazyloadElems = lazysizes.elements\n\n        if ((loadMode = lazySizesConfig.loadMode) && isLoading < 8 && (eLlen = lazyloadElems.length)) {\n\n          i = 0\n\n          lowRuns++\n\n          if (preloadExpand == null) {\n            if (!('expand' in lazySizesConfig)) {\n              lazySizesConfig.expand = docElem.clientHeight > 500 && docElem.clientWidth > 500\n                ? 500\n                : 370\n            }\n\n            defaultExpand = lazySizesConfig.expand\n            preloadExpand = defaultExpand * lazySizesConfig.expFactor\n          }\n\n          if (currentExpand < preloadExpand && isLoading < 1 && lowRuns > 2 && loadMode > 2 && !document.hidden) {\n            currentExpand = preloadExpand\n            lowRuns = 0\n          } else if (loadMode > 1 && lowRuns > 1 && isLoading < 6) {\n            currentExpand = defaultExpand\n          } else {\n            currentExpand = shrinkExpand\n          }\n\n          for (; i < eLlen; i++) {\n\n            if (!lazyloadElems[i] || lazyloadElems[i]._lazyRace) {continue}\n\n            if (!supportScroll) {\n              unveilElement(lazyloadElems[i])\n              continue\n            }\n\n            if (!(elemExpandVal = lazyloadElems[i][_getAttribute]('data-expand')) || !(elemExpand = elemExpandVal * 1)) {\n              elemExpand = currentExpand\n            }\n\n            if (beforeExpandVal !== elemExpand) {\n              eLvW = innerWidth + (elemExpand * hFac)\n              elvH = innerHeight + elemExpand\n              elemNegativeExpand = elemExpand * -1\n              beforeExpandVal = elemExpand\n            }\n\n            rect = lazyloadElems[i].getBoundingClientRect()\n\n            if ((eLbottom = rect.bottom) >= elemNegativeExpand &&\n                (eLtop = rect.top) <= elvH &&\n                (eLright = rect.right) >= elemNegativeExpand * hFac &&\n                (eLleft = rect.left) <= eLvW &&\n                (eLbottom || eLright || eLleft || eLtop) &&\n                (lazySizesConfig.loadHidden || getCSS(lazyloadElems[i], 'visibility') != 'hidden') &&\n                ((isCompleted && isLoading < 3 && !elemExpandVal && (loadMode < 3 || lowRuns < 4)) || isNestedVisible(lazyloadElems[i], elemExpand))) {\n              unveilElement(lazyloadElems[i])\n              loadedSomething = true\n              if (isLoading > 9) {break}\n            } else if (!loadedSomething && isCompleted && !autoLoadElem &&\n                       isLoading < 4 && lowRuns < 4 && loadMode > 2 &&\n                       (preloadElems[0] || lazySizesConfig.preloadAfterLoad) &&\n                       (preloadElems[0] || (!elemExpandVal && ((eLbottom || eLright || eLleft || eLtop) || lazyloadElems[i][_getAttribute](lazySizesConfig.sizesAttr) != 'auto')))) {\n              autoLoadElem = preloadElems[0] || lazyloadElems[i]\n            }\n          }\n\n          if (autoLoadElem && !loadedSomething) {\n            unveilElement(autoLoadElem)\n          }\n        }\n      }\n\n      var throttledCheckElements = throttle(checkElements)\n\n      var switchLoadingClass = function (e) {\n        addClass(e.target, lazySizesConfig.loadedClass)\n        removeClass(e.target, lazySizesConfig.loadingClass)\n        addRemoveLoadEvents(e.target, rafSwitchLoadingClass)\n        triggerEvent(e.target, 'lazyloaded')\n      }\n      var rafedSwitchLoadingClass = rAFIt(switchLoadingClass)\n      var rafSwitchLoadingClass = function (e) {\n        rafedSwitchLoadingClass({target: e.target})\n      }\n\n      var changeIframeSrc = function (elem, src) {\n        try {\n          elem.contentWindow.location.replace(src)\n        } catch (e) {\n          elem.src = src\n        }\n      }\n\n      var handleSources = function (source) {\n        var customMedia\n\n        var sourceSrcset = source[_getAttribute](lazySizesConfig.srcsetAttr)\n\n        if ((customMedia = lazySizesConfig.customMedia[source[_getAttribute]('data-media') || source[_getAttribute]('media')])) {\n          source.setAttribute('media', customMedia)\n        }\n\n        if (sourceSrcset) {\n          source.setAttribute('srcset', sourceSrcset)\n        }\n      }\n\n      var lazyUnveil = rAFIt(function (elem, detail, isAuto, sizes, isImg) {\n        var src, srcset, parent, isPicture, event, firesLoad\n\n        if (!(event = triggerEvent(elem, 'lazybeforeunveil', detail)).defaultPrevented) {\n\n          if (sizes) {\n            if (isAuto) {\n              addClass(elem, lazySizesConfig.autosizesClass)\n            } else {\n              elem.setAttribute('sizes', sizes)\n            }\n          }\n\n          srcset = elem[_getAttribute](lazySizesConfig.srcsetAttr)\n          src = elem[_getAttribute](lazySizesConfig.srcAttr)\n\n          if (isImg) {\n            parent = elem.parentNode\n            isPicture = parent && regPicture.test(parent.nodeName || '')\n          }\n\n          firesLoad = detail.firesLoad || (('src' in elem) && (srcset || src || isPicture))\n\n          event = {target: elem}\n\n          if (firesLoad) {\n            addRemoveLoadEvents(elem, resetPreloading, true)\n            clearTimeout(resetPreloadingTimer)\n            resetPreloadingTimer = setTimeout(resetPreloading, 2500)\n\n            addClass(elem, lazySizesConfig.loadingClass)\n            addRemoveLoadEvents(elem, rafSwitchLoadingClass, true)\n          }\n\n          if (isPicture) {\n            forEach.call(parent.getElementsByTagName('source'), handleSources)\n          }\n\n          if (srcset) {\n            elem.setAttribute('srcset', srcset)\n          } else if (src && !isPicture) {\n            if (regIframe.test(elem.nodeName)) {\n              changeIframeSrc(elem, src)\n            } else {\n              elem.src = src\n            }\n          }\n\n          if (isImg && (srcset || isPicture)) {\n            updatePolyfill(elem, {src: src})\n          }\n        }\n\n        if (elem._lazyRace) {\n          delete elem._lazyRace\n        }\n        removeClass(elem, lazySizesConfig.lazyClass)\n\n        rAF(function () {\n          if (!firesLoad || (elem.complete && elem.naturalWidth > 1)) {\n            if (firesLoad) {\n              resetPreloading(event)\n            } else {\n              isLoading--\n            }\n            switchLoadingClass(event)\n          }\n        }, true)\n      })\n\n      var unveilElement = function (elem) {\n        var detail\n\n        var isImg = regImg.test(elem.nodeName)\n\n        //allow using sizes=\"auto\", but don't use. it's invalid. Use data-sizes=\"auto\" or a valid value for sizes instead (i.e.: sizes=\"80vw\")\n        var sizes = isImg && (elem[_getAttribute](lazySizesConfig.sizesAttr) || elem[_getAttribute]('sizes'))\n        var isAuto = sizes == 'auto'\n\n        if ((isAuto || !isCompleted) && isImg && (elem[_getAttribute]('src') || elem.srcset) && !elem.complete && !hasClass(elem, lazySizesConfig.errorClass)) {return}\n\n        detail = triggerEvent(elem, 'lazyunveilread').detail\n\n        if (isAuto) {\n          autoSizer.updateElem(elem, true, elem.offsetWidth)\n        }\n\n        elem._lazyRace = true\n        isLoading++\n\n        lazyUnveil(elem, detail, isAuto, sizes, isImg)\n      }\n\n      var onload = function () {\n        if (isCompleted) {return}\n        if (Date.now() - started < 999) {\n          setTimeout(onload, 999)\n          return\n        }\n        var afterScroll = debounce(function () {\n          lazySizesConfig.loadMode = 3\n          throttledCheckElements()\n        })\n\n        isCompleted = true\n\n        lazySizesConfig.loadMode = 3\n\n        throttledCheckElements()\n\n        addEventListener('scroll', function () {\n          if (lazySizesConfig.loadMode == 3) {\n            lazySizesConfig.loadMode = 2\n          }\n          afterScroll()\n        }, true)\n      }\n\n      return {\n        _: function () {\n          started = Date.now()\n\n          lazysizes.elements = document.getElementsByClassName(lazySizesConfig.lazyClass)\n          preloadElems = document.getElementsByClassName(lazySizesConfig.lazyClass + ' ' + lazySizesConfig.preloadClass)\n          hFac = lazySizesConfig.hFac\n\n          addEventListener('scroll', throttledCheckElements, true)\n\n          addEventListener('resize', throttledCheckElements, true)\n\n          if (window.MutationObserver) {\n            new MutationObserver(throttledCheckElements).observe(docElem, {\n              childList: true,\n              subtree: true,\n              attributes: true\n            })\n          } else {\n            docElem[_addEventListener]('DOMNodeInserted', throttledCheckElements, true)\n            docElem[_addEventListener]('DOMAttrModified', throttledCheckElements, true)\n            setInterval(throttledCheckElements, 999)\n          }\n\n          addEventListener('hashchange', throttledCheckElements, true);\n\n          //, 'fullscreenchange'\n          ['focus', 'mouseover', 'click', 'load', 'transitionend', 'animationend', 'webkitAnimationEnd'].forEach(function (name) {\n            document[_addEventListener](name, throttledCheckElements, true)\n          })\n\n          if ((/d$|^c/.test(document.readyState))) {\n            onload()\n          } else {\n            addEventListener('load', onload)\n            document[_addEventListener]('DOMContentLoaded', throttledCheckElements)\n            setTimeout(onload, 20000)\n          }\n\n          if (lazysizes.elements.length) {\n            checkElements()\n            rAF._lsFlush()\n          } else {\n            throttledCheckElements()\n          }\n        },\n        checkElems: throttledCheckElements,\n        unveil: unveilElement\n      }\n    })()\n\n    var autoSizer = (function () {\n      var autosizesElems\n\n      var sizeElement = rAFIt(function (elem, parent, event, width) {\n        var sources, i, len\n        elem._lazysizesWidth = width\n        width += 'px'\n\n        elem.setAttribute('sizes', width)\n\n        if (regPicture.test(parent.nodeName || '')) {\n          sources = parent.getElementsByTagName('source')\n          for (i = 0, len = sources.length; i < len; i++) {\n            sources[i].setAttribute('sizes', width)\n          }\n        }\n\n        if (!event.detail.dataAttr) {\n          updatePolyfill(elem, event.detail)\n        }\n      })\n      var getSizeElement = function (elem, dataAttr, width) {\n        var event\n        var parent = elem.parentNode\n\n        if (parent) {\n          width = getWidth(elem, parent, width)\n          event = triggerEvent(elem, 'lazybeforesizes', {width: width, dataAttr: !!dataAttr})\n\n          if (!event.defaultPrevented) {\n            width = event.detail.width\n\n            if (width && width !== elem._lazysizesWidth) {\n              sizeElement(elem, parent, event, width)\n            }\n          }\n        }\n      }\n\n      var updateElementsSizes = function () {\n        var i\n        var len = autosizesElems.length\n        if (len) {\n          i = 0\n\n          for (; i < len; i++) {\n            getSizeElement(autosizesElems[i])\n          }\n        }\n      }\n\n      var debouncedUpdateElementsSizes = debounce(updateElementsSizes)\n\n      return {\n        _: function () {\n          autosizesElems = document.getElementsByClassName(lazySizesConfig.autosizesClass)\n          addEventListener('resize', debouncedUpdateElementsSizes)\n        },\n        checkElems: debouncedUpdateElementsSizes,\n        updateElem: getSizeElement\n      }\n    })()\n\n    var init = function () {\n      if (!init.i) {\n        init.i = true\n        autoSizer._()\n        loader._()\n      }\n    };\n\n    (function () {\n      var prop\n\n      var lazySizesDefaults = {\n        lazyClass: 'lazyload',\n        loadedClass: 'lazyloaded',\n        loadingClass: 'lazyloading',\n        preloadClass: 'lazypreload',\n        errorClass: 'lazyerror',\n        //strictClass: 'lazystrict',\n        autosizesClass: 'lazyautosizes',\n        srcAttr: 'data-src',\n        srcsetAttr: 'data-srcset',\n        sizesAttr: 'data-sizes',\n        //preloadAfterLoad: false,\n        minSize: 40,\n        customMedia: {},\n        init: true,\n        expFactor: 1.5,\n        hFac: 0.8,\n        loadMode: 2,\n        loadHidden: true,\n      }\n\n      lazySizesConfig = window.lazySizesConfig || window.lazysizesConfig || {}\n\n      for (prop in lazySizesDefaults) {\n        if (!(prop in lazySizesConfig)) {\n          lazySizesConfig[prop] = lazySizesDefaults[prop]\n        }\n      }\n\n      window.lazySizesConfig = lazySizesConfig\n\n      setTimeout(function () {\n        if (lazySizesConfig.init) {\n          init()\n        }\n      })\n    })()\n\n    lazysizes = {\n      cfg: lazySizesConfig,\n      autoSizer: autoSizer,\n      loader: loader,\n      init: init,\n      uP: updatePolyfill,\n      aC: addClass,\n      rC: removeClass,\n      hC: hasClass,\n      fire: triggerEvent,\n      gW: getWidth,\n      rAF: rAF,\n    }\n\n    return lazysizes\n  }\n))\n"]}